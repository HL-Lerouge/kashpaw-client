<ion-content [style.--background]="scannActiv ? 'transparent' : ''" style="padding:10px">

  <!-- Scanner UI -->
  <ng-container *ngIf="scannActiv">
    <zxing-scanner
      [enable]="scannActiv"
      [device]="currentDevice"
      (scanSuccess)="onScanSuccess($event)"
      (camerasFound)="onCamerasFound($event)"
      (scanError)="onScanError($event)">
    </zxing-scanner>
      <ion-button class="switch-camera" fill="clear" (click)="switchCamera()" *ngIf="availableDevices.length > 1">
        <ion-icon name="camera-reverse">Changer</ion-icon>
      </ion-button>
      
      <!-- <ion-button class="stop button1" expand="block" (click)="insereNum()">
        Entrer Numéro marchand
      </ion-button> -->
    <div *ngIf="scannActiv" class="scan-box"></div>
  </ng-container>

  <!-- Step 2: Transaction Details -->
  <ng-container *ngIf="etap=='2'">
    <ion-card style="height: 100px">
      <ion-card-content style="font-weight: bold;text-align: center;font-size: 25px">
        <ion-row>
          <ion-col size="12">
            <h1> {{comptePrincipale?.balance | currency : " HTG "}}</h1>
            <ion-label>Balance Actuelle</ion-label>
          </ion-col>
        </ion-row>
      </ion-card-content>
    </ion-card>

    <ion-item lines="none">
      <ion-label style="font-weight: bold">No transaction</ion-label>
      <ion-label slot="end">{{dataQrcode.no_transaction}}</ion-label>
    </ion-item>

    <ion-item lines="none">
      <ion-label style="font-weight: bold">Envoyer à</ion-label>
      <ion-label slot="end">{{dataQrcode.nom}}</ion-label>
    </ion-item>

    <ion-item lines="none">
      <ion-label style="font-weight: bold">Numéro</ion-label>
      <ion-label slot="end">{{dataQrcode.marchand}}</ion-label>
    </ion-item>
    <ion-item lines="none">
      <ion-label style="font-weight: bold">Montant à envoyer</ion-label>
      <ion-label slot="end">{{dataQrcode.montant}}</ion-label>
    </ion-item>
    

    <ion-item lines="none">
      <ion-button color="success" (click)="suivant2()" slot="end" fill="clear">Suivant
        <ion-icon size="large" name="arrow-forward-outline"></ion-icon>
      </ion-button>
    </ion-item>
  </ng-container>

  <!-- Step 3: Transaction Summary -->
  <ng-container *ngIf="etap=='3'">
    <ion-card style="height: 100px">
      <ion-card-content style="font-weight: bold;text-align: center;font-size: 25px">
        <ion-row>
          <ion-col size="12">
            <h1>{{comptePrincipale?.balance | currency : " HTG "}}</h1>
            <ion-label>Balance Actuelle</ion-label>
          </ion-col>
        </ion-row>
      </ion-card-content>
    </ion-card>

    <h3 class="ion-padding">Resumé de la Transaction</h3>

    <ion-item lines="none">
      <ion-label>No transaction</ion-label>
      <ion-label style="font-weight: bold" slot="end">{{infoTransfert.no_transaction}}</ion-label>
    </ion-item>

    <ion-item lines="none">
      <ion-label>Marchand</ion-label>
      <ion-label style="font-weight: bold" slot="end">{{infoTransfert.marchand}}</ion-label>
    </ion-item>

    <ion-item lines="none">
      <ion-label>Numéro marchand</ion-label>
      <ion-label style="font-weight: bold" slot="end">{{infoTransfert.a}}</ion-label>
    </ion-item>

    <ion-item>
      <ion-label>Montant a payé :</ion-label>
      <ion-label slot="end" style="font-weight: bold"> {{infoTransfert.montant}}</ion-label>
    </ion-item>
    <ion-item>
      <ion-label>Frais :</ion-label>
      <ion-label slot="end" style="font-weight: bold">{{infoTransfert.frais}}</ion-label>
    </ion-item>
   
    <ion-item>
      <ion-label>Total montant :</ion-label>
      <ion-label slot="end" style="font-weight: bold">{{infoTransfert.montant}}</ion-label>
    </ion-item>

    <ion-button class="button1" (click)="confirmer()" shape="round" expand="block" style="margin: 50px; width: 300px;">Confirmer</ion-button>
  </ng-container>

</ion-content>